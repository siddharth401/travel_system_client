{"code":"webpackJsonp([31],{SlOo:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var a,i,s=n(\"3j3K\"),r=n(\"2Je8\"),l=n(\"5oXY\"),o=n(\"yZ7X\"),c=n(\"uy/h\"),d=this&&this.__decorate||function(t,e,n,a){var i,s=arguments.length,r=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},f=this&&this.__metadata||function(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e){this.app=t,this.route=e,this.listCountry={}}return t.prototype.ngOnInit=function(){this.filter=new c.a(this.app,this.route,\"cities\")},t}();u=d([Object(s.Component)({selector:\"admin-city-list\",template:n(\"TU/E\")}),f(\"design:paramtypes\",[\"function\"==typeof(a=\"undefined\"!=typeof o.a&&o.a)&&a||Object,\"function\"==typeof(i=\"undefined\"!=typeof l.a&&l.a)&&i||Object])],u);var m,p,v,g,b=n(\"g7A0\"),h=n(\"B8ED\"),y=this&&this.__decorate||function(t,e,n,a){var i,s=arguments.length,r=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},x=this&&this.__metadata||function(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e,n,a){this.app=t,this.route=e,this.router=n,this.upload=a,this.listCountry={},this.listPrefectures={},this.listLanguage={},this.listPre={},this.languageError=[],this.nameCityError=[],this.error={},this.language_id=this.app.getConfig(\"BACKEND_LANG_ID\"),this.dataLanguage={name:\"\",language_id:\"\"},this.data={id:\"\",country_id:\"\",prefecture_id:\"\",prefix:\"\",active:1}}return t.prototype.ngOnInit=function(){var t=this;this.fb=new h.a(this.app,this.data),this.fb.initChild(\"city_translates\",this.dataLanguage),this.route.params.subscribe(function(e){e.id?(t.fb.isNew=!1,t.fb.bindData(\"cities/detail\",{id:e.id})):t.fb.addItem(\"city_translates\")}),this.getListCountry(),this.getListLanguage(),this.getListPre()},t.prototype.getListCountry=function(){var t=this;this.app.get(\"countries/backend_lists\").then(function(e){200===e.status&&(t.listCountry=t.app.arrToList(e.json().data,\"id\",\"name\"))})},t.prototype.getListLanguage=function(){var t=this;this.app.get(\"languages\",{active:1,is_display:1}).then(function(e){200==e.status&&(t.listLanguage=t.app.arrToList(e.json().data,\"id\",\"name\"))})},t.prototype.getListPre=function(){var t=this;this.app.get(\"prefectures/backend_lists\").then(function(e){200==e.status&&(t.listPre=t.app.arrToList(e.json().data,\"id\",\"name\"))})},t.prototype.save=function(t){var e=this;this.fb.form.value.country_id!=this.app.constant.COUNTRY_DEFAULT&&delete this.fb.form.value.prefecture_id,this.fb.form.value.form_confirm=t,console.log(this.fb.form.value),this.app.post(\"cities/save\",this.fb.form.value).then(function(n){if(200===n.status)t?$(\"#formConfirm\").modal(\"show\"):($(\"#formConfirm\").modal(\"hide\"),e.app.adminFlashSuccess(e.app.trans(\"Data has been saved\")),e.router.navigate([\"admin/city\"]));else{e.error=n.json(),e.languageError=[],e.nameCityError=[];for(var a=0;a<$(\".language_id\").length;a++)e.languageError.push(n.json()[\"city_translates.\"+a+\".language_id\"]);for(a=0;a<$(\".language_id\").length;a++)e.nameCityError.push(n.json()[\"city_translates.\"+a+\".name\"])}})},t.prototype.getPrefecture=function(t){var e=this;void 0===t&&(t=null),this.app.get(\"prefectures/backend_lists\",{language_id:this.language_id}).then(function(t){200==t.status&&(e.fb.form.value.prefecture_id=\"\",e.listPrefectures=e.app.arrToList(t.json().data,\"id\",\"name_translate\"))})},t}(),C=[{path:\"\",data:{pageTitle:\"Prefecture\"},children:[{path:\"\",component:u},{path:\"form\",component:_=y([Object(s.Component)({selector:\"admin-city-form\",template:n(\"gtol\"),styles:[n(\"ieRJ\")]}),x(\"design:paramtypes\",[\"function\"==typeof(m=\"undefined\"!=typeof o.a&&o.a)&&m||Object,\"function\"==typeof(p=\"undefined\"!=typeof l.a&&l.a)&&p||Object,\"function\"==typeof(v=\"undefined\"!=typeof l.c&&l.c)&&v||Object,\"function\"==typeof(g=\"undefined\"!=typeof b.a&&b.a)&&g||Object])],_)},{path:\"form/:id\",component:_}]}],w=l.d.forChild(C),j=n(\"SX/m\"),k=n(\"NVOs\"),L=n(\"fAE3\");n.d(e,\"CityModule\",function(){return O});var N=this&&this.__decorate||function(t,e,n,a){var i,s=arguments.length,r=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},O=function(){return function(){}}();O=N([Object(s.NgModule)({imports:[r.CommonModule,w,j.a,k.b,k.e,L.a],exports:[],providers:[],declarations:[_,u]})],O)},\"TU/E\":function(t,e){t.exports='<div id=\"content\">\\n    <admin-flash></admin-flash>\\n    <div class=\"row\">\\n        <div class=\"row\">\\n            <sa-big-breadcrumbs [items]=\"[[\\'Master management\\'|trans],[\\'City management\\'|trans],[\\'City list\\'|trans]]\" icon=\"plus-square\"\\n                                class=\"col-xs-12 \"></sa-big-breadcrumbs>\\n        </div>\\n\\n    </div>\\n\\n    \\x3c!-- widget grid --\\x3e\\n    <section id=\"widget-grid\" class=\"\">\\n        \\x3c!-- row --\\x3e\\n        <div class=\"row\">\\n\\n            \\x3c!-- NEW WIDGET START --\\x3e\\n            <article class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12 sortable-grid ui-sortable\">\\n                <div class=\"jarviswidget jarviswidget-color-blueDark\" >\\n                    <header role=\"heading\">\\n                        <span class=\"widget-icon\"> <i class=\"fa fa-table\"></i> </span>\\n                        <h2>{{\\'City list\\'|trans}}</h2>\\n\\n                        <span class=\"jarviswidget-loader\"><i class=\"fa fa-refresh fa-spin\"></i></span>\\n                    </header>\\n                    <div role=\"content\">\\n                        <a [routerLink]=\\'[\"/admin/city/form\"]\\' class=\"btn btn-default btn-primary pull-right\">{{\\'New city\\'|trans}}</a>\\n                        <div class=\"clearfix\"></div>\\n                        <br/>\\n                        <div class=\"widget-body\">\\n                            <div class=\"table-scroll\">\\n                                <table class=\"table table-striped table-bordered table-hover\" >\\n                                    <thead>\\n                                    <tr class=\"thead-table\">\\n                                        <th (click)=\"filter.sort(\\'id\\',$event)\"><a>{{\\'ID\\'|trans}}</a><span class=\"arrow desc\"></span></th>\\n                                        <th><a>{{\\'Country name\\'|trans}}</a></th>\\n                                        <th><a>{{\\'Prefecture name\\'|trans}}</a></th>\\n                                        <th><a>{{\\'City name\\'|trans}}</a></th>\\n                                        <th (click)=\"filter.sort(\\'prefix\\',$event)\"><a>{{\\'City prefix\\'|trans}}</a><span class=\"arrow desc\"></span></th>\\n                                        <th (click)=\"filter.sort(\\'created_at\\',$event)\"><a>{{\\'Created at\\'|trans}}</a><span class=\"arrow desc\"></span></th>\\n                                        <th (click)=\"filter.sort(\\'active\\',$event)\"><a>{{\\'Status\\'|trans}}</a><span class=\"arrow desc\"></span></th>\\n                                    </tr>\\n                                    \\x3c!--<tr>--\\x3e\\n                                        \\x3c!--<th class=\"hasinput\"><input (input)=\"filter.change(\\'id\\',$event)\" class=\"form-control\" placeholder=\"{{\\'Filter\\'|trans}}\" type=\"text\" /></th>--\\x3e\\n                                        \\x3c!--<th class=\"hasinput\"><input (input)=\"filter.change(\\'name\\',$event)\" class=\"form-control\" placeholder=\"{{\\'Filter\\'|trans}}\" type=\"text\" /></th>--\\x3e\\n                                        \\x3c!--<th class=\"hasinput\">--\\x3e\\n                                            \\x3c!--<select (change)=\"filter.change(\\'country_id\\',$event)\" class=\"form-control\" >--\\x3e\\n                                                \\x3c!--<option *ngFor=\"let item of listCountry|list:(\\'Select Country\\'|trans)\" [value]=\"item.key\" [selected]=\"item.key==\\'\\'\" >{{item.value|trans}}</option>--\\x3e\\n                                            \\x3c!--</select>--\\x3e\\n                                        \\x3c!--</th>--\\x3e\\n                                        \\x3c!--<th class=\"hasinput\"><input (input)=\"filter.change(\\'order\\',$event)\" class=\"form-control\" placeholder=\"{{\\'Filter\\'|trans}}\" type=\"text\" /></th>--\\x3e\\n                                        \\x3c!--<th class=\"hasinput\"><input (input)=\"filter.change(\\'created_at\\',$event)\" class=\"form-control\" placeholder=\"{{\\'Filter\\'|trans}}\" type=\"text\" /></th>--\\x3e\\n                                        \\x3c!--<th class=\"hasinput\">--\\x3e\\n                                            \\x3c!--<select (change)=\"filter.change(\\'active\\',$event)\" class=\"form-control\">--\\x3e\\n                                                \\x3c!--<option *ngFor=\"let item of app.constant.Active|list:(\\'Select\\'|trans)\" [value]=\"item.key\" [selected]=\"item.key==\\'\\'\" >{{item.value|trans}}</option>--\\x3e\\n                                            \\x3c!--</select>--\\x3e\\n                                        \\x3c!--</th>--\\x3e\\n                                    \\x3c!--</tr>--\\x3e\\n                                    </thead>\\n                                    <tbody  *ngIf=\"filter.result.total == 0\">\\n                                    <tr>\\n                                        <td colspan=\"6\" class=\"text-center\">{{\\'No data result\\'|trans}}</td>\\n                                    </tr>\\n                                    </tbody>\\n                                    <tbody *ngIf=\"filter.result\">\\n                                    <tr *ngFor=\"let item of filter.result.data\">\\n                                        <td>{{item.id}}</td>\\n                                        <td><span *ngIf=\"item.country\">{{item.country.name}}</span></td>\\n                                        <td>\\n                                            <span *ngIf=\"item.prefecture\">{{item.prefecture.name}}</span>\\n                                            <span *ngIf=\"!item.prefecture\">{{\\'\\u306a\\u3057\\'|trans}}</span>\\n                                        </td>\\n                                        <td style=\"text-align: left\"><a [routerLink]=\\'[\"/admin/city/form\",item.id]\\' title=\"{{\\'Detail\\'|trans}}\">{{item.name}}<br></a></td>\\n                                        <td>{{item.prefix}}</td>\\n                                        <td>{{item.created_at|datex: \\'YYYY/MM/DD\\'}}</td>\\n                                        <td><sa-active active=\"{{item.active}}\" model=\"City\" id=\"{{item.id}}\"></sa-active></td>\\n                                    </tr>\\n                                    </tbody>\\n                                </table>\\n                            </div>\\n                            <sa-paginator  *ngIf=\"filter.result.total > 10\" [data]=\"filter.result\" url=\"/admin/city\"></sa-paginator>\\n                        </div>\\n                    </div>\\n                </div>\\n            </article>\\n        </div>\\n    </section>\\n</div>\\n'},gtol:function(t,e){t.exports='<div id=\"content\">\\n  <div class=\"row\">\\n    <sa-big-breadcrumbs [items]=\"[[\\'Master management\\'|trans],[\\'City management\\'|trans],[\\'City list\\'|trans, \\'/admin/city\\'],[(fb.isNew?\\'City add\\':\\'City detail\\')|trans]]\" icon=\"plus-square\"\\n                        class=\"col-xs-12\"></sa-big-breadcrumbs>\\n\\n  </div>\\n\\n  <section id=\"widget-grid\" class=\"\">\\n    <div class=\"row\">\\n      <article class=\"col-sm-12\">\\n        <div class=\"jarviswidget jarviswidget-sortable\" id=\"wid-id-0\" data-widget-colorbutton=\"false\" data-widget-editbutton=\"false\" role=\"widget\">\\n          <header role=\"heading\">\\n            <div class=\"jarviswidget-ctrls\" role=\"menu\">\\n              <a href=\"javascript:void(0);\" class=\"button-icon jarviswidget-fullscreen-btn\" rel=\"tooltip\" title=\"\" data-placement=\"bottom\" data-original-title=\"Fullscreen\"><i class=\"fa fa-expand \"></i></a>\\n            </div>\\n            <span class=\"widget-icon\"> <i class=\"fa fa-pencil-square-o\"></i> </span>\\n            <h2 *ngIf=\"!fb.isNew\">{{\\'City detail\\'|trans}}</h2>\\n            <h2 *ngIf=\"fb.isNew\">{{\\'City add\\'|trans}}</h2>\\n          </header>\\n\\n          <div role=\"content\">\\n            <div class=\"jarviswidget-editbox\">\\n            </div>\\n            <div class=\"widget-body\">\\n              <form [formGroup]=\"fb.form\" class=\"form-horizontal\" (ngSubmit)=\"save(true)\">\\n                <fieldset>\\n                  <div class=\"form-group\" *ngIf=\"fb.isNew == false\">\\n                    <label class=\"col-md-2 control-label\">{{\\'NO\\'|trans}} </label>\\n                    <div class=\"col-md-8\">\\n                      <label style=\"padding-left: 20px;\" class=\"control-label\">  {{fb.form.value[\\'id\\']}}</label>\\n                    </div>\\n                  </div>\\n                  <div class=\"form-group\">\\n                    <label class=\"col-md-2 control-label\">{{\\'City country\\'|trans}} <span class=\"text-danger\">*</span></label>\\n                    <div class=\"col-md-8\">\\n                      <select  formControlName=\"country_id\" class=\"form-control\" (change)=\"getPrefecture(fb.form.value.country_id)\">\\n                        <option value=\"\"> {{\\'---Country Select---\\'|trans}}</option>\\n                        <option *ngFor=\"let item of listCountry|list\" [value]=\"item.key\" [selected]=\"item.key==\\'\\'\" >{{item.value|trans}}</option>\\n                      </select>\\n                    </div>\\n                  </div>\\n\\n                  <div class=\"form-group\" *ngIf=\"fb.form.value.country_id == app.constant.COUNTRY_DEFAULT\">\\n                    <label class=\"col-md-2 control-label\">{{\\'City prefecture\\'|trans}} <span class=\"text-danger\">*</span></label>\\n                    <div class=\"col-md-8\">\\n                      <select  formControlName=\"prefecture_id\" class=\"form-control\">\\n                        <option value=\"\" [selected]=\"fb.form.value.prefecture_id == \\'\\' || fb.form.value.prefecture_id == 0\"> {{\\'---Prefecture Select---\\'|trans}}</option>\\n                        <option *ngFor=\"let item of listPre|list\" [value]=\"item.key\" [selected]=\"item.key==fb.form.value.prefecture_id\">{{item.value|trans}}</option>\\n                      </select>\\n                    </div>\\n                  </div>\\n                  <div class=\"form-group\">\\n                    <label class=\"col-md-2 control-label\">{{\\'K063_City Name\\'|trans}} <span class=\"text-danger\">*</span></label>\\n                    <div class=\"col-md-10\">\\n                      <div *ngIf=\"fb.form.value.city_translates.length > 0\">\\n                        <div formArrayName=\"city_translates\">\\n                          <div *ngFor=\"let item of fb.form.controls.city_translates.controls; let i = index;\">\\n                            <div [formGroupName]=\"i\" class=\"\">\\n                              <div class=\"row\" [formGroup]=\"fb.form.controls.city_translates.controls[i]\">\\n                                <div class=\"col-md-3\">\\n                                  <input formControlName=\"name\"  type=\"text\" placeholder=\"{{\\'K063_City Name\\'|trans}}\" class=\"form-control name\" />\\n                                  <small class=\"msg_err\" *ngIf=\"nameCityError\">{{nameCityError[i]|trans}}</small>\\n                                </div>\\n                                <div class=\"col-md-3\">\\n                                  <select formControlName=\"language_id\"  class=\"form-control language_id\" *ngIf=\"listLanguage\">\\n                                    <option value=\"\">{{\\'Select Language\\' | trans}}</option>\\n                                    <option *ngFor=\"let item of listLanguage|list\" [value]=\"item.key\" [selected]=\"item.key==fb.form.value.city_translates[i].language_id\">{{item.value}}</option>\\n                                  </select>\\n                                  <small class=\"msg_err\" *ngIf=\"languageError\">{{languageError[i]|trans}}</small>\\n                                  <span class=\"msg_note\">{{\\'* You will need to find the language which corresponds to that country language\\' | trans}}</span>\\n                                </div>\\n                                <div class=\"col-md-1\">\\n                                  <i class=\"fa fa-trash-o btn btn-danger\" *ngIf=\"i!=0\" (click)=\"fb.removeItem(\\'city_translates\\',i)\" aria-hidden=\"true\"></i>\\n                                </div>\\n                              </div>\\n                            </div>\\n                          </div>\\n                        </div>\\n                      </div>\\n                      <div class=\"\">\\n                        <div class=\"col-md-1 control-label text-left\">\\n                          <i class=\"fa fa-plus btn btn-default\" (click)=\"fb.addItem(\\'city_translates\\')\" aria-hidden=\"true\"></i>\\n                        </div>\\n                      </div>\\n                    </div>\\n                  </div>\\n                  <div class=\"form-group\">\\n                    <label class=\"col-md-2 control-label\">{{\\'City prefix\\'|trans}} <span class=\"text-danger\">*</span></label>\\n                    <div class=\"col-md-8\">\\n                      <input formControlName=\"prefix\" placeholder=\"{{\\'City prefix\\'|trans}}\" class=\"form-control\">\\n                    </div>\\n                  </div>\\n                  <div class=\"form-group\">\\n                    <label class=\"col-md-2 control-label\">{{\\'Status\\'|trans}}</label>\\n                    <div class=\"col-md-2 text-left\">\\n                      <select formControlName=\"active\" class=\"form-control\">\\n                        <option *ngFor=\"let item of app.constant.Active|list\" [value]=\"item.key\" [selected]=\"item.key==1\" >{{item.value|trans}}</option>\\n                      </select>\\n                    </div>\\n                  </div>\\n                </fieldset>\\n                <div class=\"form-actions\">\\n                  <div class=\"row\">\\n                    <div class=\"col-md-12\">\\n                      <a class=\"btn btn-default\" [routerLink]=\\'[\"/admin/city\"]\\' type=\"button\">{{\\'Cancel\\'|trans}}</a>\\n                      <button class=\"btn btn-primary\" type=\"submit\"><i class=\"\"></i> {{\\'Submit\\'|trans}}</button>\\n                    </div>\\n                  </div>\\n                </div>\\n              </form>\\n            </div>\\n          </div>\\n        </div>\\n      </article>\\n    </div>\\n  </section>\\n</div>\\n\\n<div class=\"modal fade\" id=\"formConfirm\" aria-hidden=\"true\">\\n  <div class=\"modal-dialog\">\\n    <div class=\"modal-content\">\\n      <div class=\"modal-header\">\\n        <h4 class=\"modal-title\">{{\\'Confirmation\\'|trans}}</h4>\\n      </div>\\n      <div class=\"modal-body\">\\n        <div class=\"row\">\\n          <div class=\"form-group\">\\n            <label class=\"col-md-4 control-label\"><strong>{{\\'City country\\'|trans}}</strong></label>\\n            <div class=\"col-md-8\">{{listCountry[fb.form.get(\\'country_id\\').value]}}</div>\\n          </div>\\n        </div>\\n        <div class=\"row\" *ngIf=\"fb.form.value.country_id == app.constant.COUNTRY_DEFAULT\">\\n          <div class=\"form-group\">\\n            <label class=\"col-md-4 control-label\"><strong>{{\\'City prefecture\\'|trans}}</strong></label>\\n            <div class=\"col-md-8\">{{listPre[fb.form.get(\\'prefecture_id\\').value]}}</div>\\n          </div>\\n        </div>\\n        <div *ngFor=\"let item of fb.form.get(\\'city_translates\\').value\">\\n          <div class=\"row\">\\n            <div class=\"form-group\">\\n              <label class=\"col-md-4 control-label\"><strong>{{\\'K063_City Name\\'|trans}}</strong></label>\\n              <div class=\"col-md-8\">{{item.name}}</div>\\n            </div>\\n          </div>\\n          <div class=\"row\">\\n            <div class=\"form-group\">\\n              <label class=\"col-md-4 control-label\"><strong>{{\\'Language\\'|trans}}</strong></label>\\n              <div class=\"col-md-8\">{{listLanguage[item.language_id]}}</div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\"row\">\\n          <div class=\"form-group\">\\n            <label class=\"col-md-4 control-label\"><strong>{{\\'Prefix\\'|trans}}</strong></label>\\n            <div class=\"col-md-8\">{{fb.form.get(\\'prefix\\').value}}</div>\\n          </div>\\n        </div>\\n        <div class=\"row\">\\n          <div class=\"form-group\">\\n            <label class=\"col-md-4 control-label\"><strong>{{\\'Status\\'|trans}}</strong></label>\\n            <div class=\"col-md-8\">{{app.constant.Active[fb.form.get(\\'active\\').value]|trans}}</div>\\n          </div>\\n        </div>\\n\\n      </div>\\n      <div class=\"modal-footer\">\\n        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\\'Cancel\\'|trans}}</button>\\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"save()\"><i class=\"\"></i> {{\\'Confirm\\'|trans}}</button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<sa-file-browser></sa-file-browser>'},ieRJ:function(t,e){t.exports=\".msg_err {\\n    display: block;\\n    margin-top: 5px;\\n    margin-bottom: 10px;\\n    color: #b94a48;\\n}\\n.msg_note{\\n    display: block;\\n    color: #1f496d;\\n}\"}});","extractedComments":[]}